!function(e){checkLog()||e.location.replace("./errlogin")}(window),function(p,e){p(e).ready(function(){p("#uploadbtn").click(function(e){e.preventDefault(),p.post("./createsprites/create",{creating:"sprites"},function(){console.log("post sent")}).done(function(e){"ok"!=e?alert(e):window.location="./spritescreated"})}),p("#uploadfiles").val("").change();function i(e){this.file=e}i.prototype.getType=function(){return this.file.type},i.prototype.getSize=function(){return this.file.size},i.prototype.getName=function(){return this.file.name},i.prototype.doUpload=function(){var t=this,e=new FormData;e.append("file",this.file,this.getName()),e.append("upload_file",!0),p.ajax({type:"POST",url:"./createsprites/upload",xhr:function(){var e=p.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",t.progressHandling,!1),e},success:function(e){console.log("Upload Complete!")},error:function(e){alert(e)},async:!0,data:e,cache:!1,contentType:!1,processData:!1,timeout:6e4}).done(function(e){console.log(e)})},i.prototype.progressHandling=function(e){var t=0,o=e.loaded||e.position,n=e.total,a="#progress-wrp";e.lengthComputable&&(t=Math.ceil(o/n*100)),p(a+" .progress-bar").css("width",+t+"%"),p(a+" .status").text(t+"%")},p("#upload input").on("change",function(e){var t=p(this)[0].files;for(var o in t){new i(t[o]).doUpload()}for(var n=document.getElementById("uploadfiles"),a=0;a<n.files.length;a++)p("#upload").append("<p>"+n.files[a].name+"</p>"),p("#upload").append("<p>"+n.files[a].type+"</p>")})})}(jQuery,document);