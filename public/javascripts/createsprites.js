!function(e){checkLog()||e.location.replace("./errlogin")}(window),function(c,e){c(e).ready(function(){c("#uploadbtn").click(function(e){e.preventDefault(),c.post("./createsprites/create",{creating:"sprites"},function(){console.log("post sent")}).done(function(e){"ok"!=e?console.log(e):setTimeout(function(){window.location="./spritescreated"},1e3)})}),c("#uploadfiles").val("").change();function r(e){this.file=e}var l=0;r.prototype.getType=function(){return this.file.type},r.prototype.getSize=function(){return this.file.size},r.prototype.getName=function(){return this.file.name},r.prototype.doUpload=function(){var n=this,e=new FormData;e.append("file",this.file,this.getName()),e.append("upload_file",!0),c.ajax({type:"POST",url:"./createsprites/upload",xhr:function(){var e=c.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",n.progressHandling,!1),e},success:function(e){var o=unescape(n.getName()).trim(),t=c("<img>",{attr:{alt:"",src:"./uploads/"+unescape(userNameCookie)+"/uploads/"+o}}).load(function(){console.log("Pic uploaded"),c(this).parent().find(".loading").fadeOut(300)});c(".upcont"+l+" .imgcont").append(t),console.log("Pic upload Complete!",l,e),l++},error:function(e){console.log(e)},async:!0,data:e,cache:!1,contentType:!1,processData:!1,timeout:6e3}).done(function(e){console.log(e)})},r.prototype.progressHandling=function(e){var o=0,t=e.loaded||e.position,n=e.total,a="#progress-wrp";e.lengthComputable&&(o=Math.ceil(t/n*100)),c(a+" .progress-bar").css("width",+o+"%"),c(a+" .status").text(o+"%")},c("#upload input").on("change",function(e){c("#progress-wrp .progress-bar").remove(),c("#progress-wrp").append('<div class="progress-bar"></div>'),c("#progress-wrp .status").text("0%");var o=c(this)[0].files;for(var t in o){new r(o[t]).doUpload()}for(var n=l,a=document.getElementById("uploadfiles"),i=l;i<a.files.length+n;i++){var s=i-l,p=c("<div>",{addClass:"upcont upcont"+i});p.append('<div class="imgcont"><div class="loading"><img src="./images/ajax-loader.gif" alt=""></div></div>'),p.append("<p>"+a.files[s].name+"</p>"),p.append("<p>"+a.files[s].type+"</p>"),c("#uploaded").append(p)}})})}(jQuery,document);